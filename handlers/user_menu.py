from aiogram import F
from aiogram.types import Message, BotCommand
from aiogram.filters import Command
from aiogram import types
from os import path
from keyboard.user_keyboard import *
from data.louder import bot
from database.functions_db import register_user
from aiogram import Router



router = Router()

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –±–æ—Ç–∞
commands = [
    BotCommand(command="/start", description="–ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞"),
]

async def set_commands():
    await bot.set_my_commands(commands=commands)

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
@router.message(Command('start'))
async def start_func(msg: Message):
    user_id = msg.from_user.id
    register_user(user_id)
    print(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å ID {user_id} –∑–∞–ø—É—Å—Ç–∏–ª –±–æ—Ç–∞.")

    await msg.answer_photo(
        photo=types.FSInputFile(path.join('images', 'logo.jpg')),
        caption=(
            'üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ *MVPNet*üåê‚ú®\n\n'
            '–ù–∞—à —Å–µ—Ä–≤–µ—Ä \\- –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–µ—Ä–≤–µ—Ä\\. –≠—Ç–æ —É–º–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ –≤–∞—à–µ–π –º–æ–±–∏–ª—å–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–µ\\! *–ü–æ–ª—É—á–∏—Ç–µ –æ—Ç–≤–µ—Ç –Ω–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å* –≤ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–æ–º –≤–∏–¥–µ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è —Å—É—Ç–æ–∫\\!\n\n'
            '> üí∞üí∞–ó–∞ 199 —Ä—É–±–ª–µ–π –≤ –º–µ—Å—è—Ü –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —É–º–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏, –µ—Å–ª–∏ —É –≤–∞—Å —á—Ç–æ\\-—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å, –º—ã –ø–æ–º–æ–∂–µ–º –∏ –æ–±—ä—è—Å–Ω–∏–º, –ø–æ—á–µ–º—É –≤–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ\\!\n\n'
            '–ë–ª–∞–≥–æ–¥–∞—Ä—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –º—ã —Å–º–æ–∂–µ–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞ –≤–∞—à–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ\\! *–ù–µ –∑–∞–±—É–¥—å—Ç–µ –µ–≥–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å*\\!\n\n'
        ), parse_mode="MarkdownV2",
        reply_markup=await trial_button(),
        # –ö–Ω–æ–ø–∫–∞ "–¢–µ—Å—Ç–æ–≤—ã–π –ø–µ—Ä–∏–æ–¥"
    )
    await msg.answer (text='–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ –º–µ–Ω—é:',reply_markup=await main_menu_keyboard())  # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (ReplyKeyboard)


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–û—Å—Ç–∞—Ç–æ–∫ –¥–Ω–µ–π"
@router.message(F.text == "–û—Å—Ç–∞—Ç–æ–∫ –¥–Ω–µ–π")
async def my_tariff(msg: Message):
    await msg.answer(
        f'üë§ –ü—Ä–æ—Ñ–∏–ª—å: {msg.from_user.username}\n\n'
        f'<b>-- ID:</b> {msg.from_user.id}\n\n'
        f'<b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –≤–∞—à –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç! –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ:</b>\n'
        f'üöÄ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–∏ –∫–ª—é—á–∏.\n'
        f'üí∞ –ö—É–ø–∏—Ç—å –∫–ª—é—á.\n'
        f'üÜò –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.\n'
        f'<b>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ, –∏ –º—ã –ø–æ–º–æ–∂–µ–º –≤–∞–º!</b>'
        )

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏ –∫–ª—é—á"
@router.message(F.text == "‚öôÔ∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏ üîë –ö–ª—é—á")
async def instruction_key(msg: Message):
    await msg.answer(text="‚öôÔ∏è –†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.", reply_markup=await main_menu_keyboard())

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–û–ø–ª–∞—Ç–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É"
@router.message(F.text == "üí∏ –û–ø–ª–∞—Ç–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É")
async def buy_subscription(msg: Message):
    await msg.answer(text="<b>–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ –≤–∞—à–µ–π –ø–æ–¥–ø–∏—Å–∫–∏:</b>", reply_markup=await inline_price())

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞"
@router.message(F.text == "ü§ù –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞")
async def referral_system(msg: Message):
    await msg.answer("üì¢ –†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.")

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ö–∞–Ω–∞–ª"
@router.message(F.text == "üì∫ –ö–∞–Ω–∞–ª")
async def channel(msg: Message):
    await msg.answer("üîî –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –Ω–∞—à –∫–∞–Ω–∞–ª: https://t.me/acesstothewords")

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ü—Ä–æ–º–æ–∫–æ–¥"
@router.message(F.text == "üéÅ –ü—Ä–æ–º–æ–∫–æ–¥")
async def promo_code(msg: Message):
    await msg.answer("üéÅ –†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.")

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ü–æ–º–æ—â—å"
@router.message(F.text == "üÜò –ü–æ–º–æ—â—å")
async def help_section(msg: Message):
    await msg.answer(
        "üìå –í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –≤—ã –Ω–∞–π–¥—ë—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Å–∞–º—ã—Ö —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—ã.\n\n"
        "–í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤—ã –Ω–µ –Ω–∞—à–ª–∏ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è –≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–º —Å–ø–∏—Å–∫–µ, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –Ω–∞—à–∏–º–∏ –æ–±—â–∏–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –∏ —Å–æ–≤–µ—Ç–∞–º–∏ üîç.\n\n"
        "–ï—Å–ª–∏ –∂–µ –∏ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ —É –≤–∞—Å –æ—Å—Ç–∞—é—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –æ–±—Ä–∞—â–∞—Ç—å—Å—è –≤ –Ω–∞—à—É —Å–ª—É–∂–±—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ - –º—ã –≤—Å–µ–≥–¥–∞ —Ä–∞–¥—ã –ø–æ–º–æ—á—å! üí¨üëç\n\n"
        "–í—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–∞–º —Å –í–∞—à–∏–º –≤–æ–ø—Ä–æ—Å–æ–º: (–ê–∫–∫–∞—É–Ω—Ç –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏)"
    )
